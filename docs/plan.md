# План решения задачи
Этапы:
1. Распознавание объектов и их масштабирование
2. Расстановка найденных объектов

## Распознавание объектов и их масштабирование
Все объекты можно поделить на 3 группы по геометрическим формам:
1. контуры которых похожи на прямоугольники
	- магнит "С новым годом"
	- наклейка HyperX
	- планка RAM
	- картридж Super Mario Odyssey
	- bluetooth ресивер
2. контуры которых похожи на окружности
	- монета 10 форинтов
	- монета 10 гяпиков
	- заклёпка
3. спиннеры
	- чёрный
	- переливающийся
### Преобразование Хафа
Преобразование Хафа можно использовать для поиска прямоугольников и окружностей.
#### Прямоугольники
Возможные проблемы:
1. Магнит "С новым годом" - может не распознаться из-за схожего цвета
2. Bluetoth ресивер - вероятно распознается как 2 прямоугольника придётся склеивать
3. Картридж Super Mario Odyssey - имеет красный прямоугольник внутри чёрного. Так как других красных прямоугольников нет, то можно будет отфильтровать эту ситуацию по цвету
4. Планка RAM - могут распознаться отдельно сама планка и её контакты. Так же могут распознаться как прямые линии элементы светлого цвета на планке.
Конкретные объекты можно распознать по цветам. Проблема, что повторяется чёрный цвет для наклейки, картриджа и ресивера. Но их можго отличит по другим цветам объектов. 
#### Окружности
Можно определить все круглые объекты. Они имеют разные цвета, поэтому не должно быть сложно их распознать.
Возможно в реальности заклёпка будет похожа по цвету на 10 гяпиков. Если это предроложение подтвердиться на данных, то можно попробовать проанализировать контуры внутри окружности.
#### Спиннеры
На спиннерах имеются круглые детали.
Скорее всего преобразование Хафа сможет уловить круглые объекты на переливающемся спиннере. Спиннер можно будет отличить:
1. по цвету
2. по характерному расположению круглых объектов
Если получится уловить круг на чёрном спиннере, то его можно будет распознать по цвету.
#### Цветовой фильтр
Цветовой фильтр будет удобно применять для чёрного спиннера:
1. найти области чёрного цвета
2. проверить, что в этом месте не были распознаны прямоугольники

Возможно придётся распознавать жёлтый или красный цвет. Это нужно будет сделать, если не будет распознаваться магнит "С новым годом".
Могут быть совпадения по цвету, которые можно отбросить анализируя уже найденные прямоугольники и окружности.
Для жёлтого цвета совпадения могут быть:
- с контактами планки RAM
- с буквой R на картридже
- с монетой 10 гяпиков
- с заклёпкой

Для красного:
- с логотипом HyperX
- с наклейкой на картридже
### План алгоритма
На входе изображение.
1. Найти прямоугольники и окружности.
2. По их цветам опознать предметы.
3. Запустить цветовой фильтр - найти чёрный спиннер и магнит "с новым годом", если не были найдены до этого.
На выходе - список объектов на изображении.

## Paccтановка найденных объектов
На входе имеем список объектов и многоугольник. Размеры многоугольника даны в см, измеренных на естественной плоскости.
Для каждого объекта заранее посчитаны его размеры и контуры.
Рассмотрим возможные подходы.
### Площадь
Можно сравнить площадь многоугольника и суммарные площади всех объектов.
Если многоугольник меньше объектов по площади, то разместить точно нельзя.
### Возможные упрощения                                                                   
Можно попробовать использовать описывающие прямоугольники (bound box) и выпуклые оболочки (convex hull).
### Перебор
Можно попробовать перебор. Идея плохая, так как расположений предметов много и надо учитывать вращения.
Но если всё-таки придётся так делать, то алгоритм будет примерно такой:
1. отсортировать предметы по уменьшению размера
2. если предметов нет, то выход - вернуть **True**
3. изъять из списка
4. попытаться поместить предмет внутри многоугольника, меняя координаты x и y
5. если разместилось, вернуться к п. 2
6. если исчерпаны возможности поворота предмета, то вернуть **False**
7. повернуть предмет, вернуться к п. 4
На самом деле это жадный алгоритм, но и он будет работать довольно долго.
### Рассмотреть расстановку как двумерную упаковку
Если рассматривать bound box'ы, то можно попробовать решить задачу двумерной упаковки. Но даже принимая это упрощение задча двумерной упаковки рассматривается для полосы.
Т.е. получаем прямоугольник вместо произвольного описывающего многоугольника. Можно рассмотреть прямоугольник такой же площади со схожими линейными размерами.

Для рассматриваемых bound box'ов много свободной площади будет у спиннеров. Поэтому если они обнаружены, то следует применить оптимизацию - возможно несколько расширить bound box, но вместить туда дополнительно до трёх предметов.
Стоит рассмотреть несколько вариантов такой оптимизации с разными предметами и для каждой построить двумерную упаковку.

Основные алгоритмы двумерной упаковки приведены [здесь](https://habr.com/ru/post/136225/). Оптимальным представляется Floor Сeiling No Rotation ((FCNR)[https://habr.com/ru/post/136225/#:~:text=%D1%81%D0%B0%D0%BC%D1%8B%D0%B5%20%D0%BC%D0%B5%D0%BB%D0%BA%D0%B8%D0%B5%20%D0%BF%D1%80%D1%8F%D0%BC%D0%BE%D1%83%D0%B3%D0%BE%D0%BB%D1%8C%D0%BD%D0%B8%D0%BA%D0%B8.-,%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC%20FCNR,-Input%3A%20The%20number])
